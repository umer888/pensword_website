!function(h){function o(i,t){this.el=i,this.$el=h(this.el),this.options=h.extend({color:"#f7f7f7",units:"",icon:0,label_selector:".vc_pie_chart_value",back_selector:".vc_pie_chart_back",responsive:!0},t),this.init()}o.prototype={constructor:o,_progress_v:0,animated:!1,init:function(){this.color=this.options.color,this.value=this.$el.data("pie-value")/100,this.label_value=this.$el.data("pie-label-value")||this.$el.data("pie-value"),this.$wrapper=h(".vc_pie_wrapper",this.$el),this.$label=h(this.options.label_selector,this.$el),this.$back=h(this.options.back_selector,this.$el),this.$canvas=this.$el.find("canvas"),this.draw(),this.setWayPoint(),!0===this.options.responsive&&this.setResponsive()},setResponsive:function(){var i=this;h(window).resize(function(){!0===i.animated&&i.circle.stop(),i.draw(!0)})},draw:function(i){var t,e=this.$el.addClass("vc_ready").width();e||(e=this.$el.parents(":visible").first().width()-2),e=e/100*80,t=(e=Math.round(e))/2-6,this.$wrapper.css({width:e+"px"}),this.$label.css({width:e,height:e,"line-height":e+"px"}),this.$back.css({width:e,height:e}),this.$canvas.attr({width:e+"px",height:e+"px"}),this.$el.addClass("vc_ready"),this.circle=new ProgressCircle({canvas:this.$canvas.get(0),minRadius:t,arcWidth:6}),!0===i&&!0===this.animated&&(this._progress_v=this.value,this.circle.addEntry({fillColor:this.color,progressListener:h.proxy(this.setProgress,this)}).start())},setProgress:function(){if(this._progress_v>=this.value)return this.circle.stop(),"0"==this.options.icon&&this.$label.text(this.label_value+this.options.units),this._progress_v;this._progress_v+=.005;var i=this._progress_v/this.value*this.label_value,t=Math.round(i)+this.options.units;return"0"==this.options.icon&&this.$label.text(t),this._progress_v},animate:function(){!0!==this.animated&&(this.animated=!0,this.circle.addEntry({fillColor:this.color,progressListener:h.proxy(this.setProgress,this)}).start(5))},setWayPoint:function(){void 0!==h.fn.waypoint?this.$el.waypoint(h.proxy(this.animate,this),{offset:"85%"}):this.animate()}},h.fn.vcChat=function(s,n){return this.each(function(){var i=h(this),t=i.data("vc_chart"),e="object"==typeof s?s:{color:i.data("pie-color"),units:i.data("pie-units"),icon:i.data("pie-icon")};void 0===s&&i.data("vc_chart",t=new o(this,e)),"string"==typeof s&&t[s](n)})},"function"!=typeof window.vc_pieChart&&(window.vc_pieChart=function(){h(".vc_pie_chart:visible").vcChat()}),h(document).ready(function(){!window.vc_iframe&&vc_pieChart()})}(window.jQuery),function(i,r,t){var a=function(i){var t,e;if(t=e=0,i.offsetParent)for(;t+=i.offsetLeft,e+=i.offsetTop,i=i.offsetParent;);return[t,e]},e=function(i){this.canvas=i.canvas,this.minRadius=i.minRadius||15,this.arcWidth=i.arcWidth||5,this.gapWidth=i.gapWidth||3,this.centerX=i.centerX||this.canvas.width/2,this.centerY=i.centerY||this.canvas.height/2,this.infoLineLength=i.infoLineLength||60,this.horizLineLength=i.horizLineLength||10,this.infoLineAngleInterval=i.infoLineAngleInterval||Math.PI/8,this.infoLineBaseAngle=i.infoLineBaseAngle||Math.PI/6,this.context=this.canvas.getContext("2d"),this.width=this.canvas.width,this.height=this.canvas.height,this.circles=[],this.runningCount=0};e.prototype={constructor:e,addEntry:function(i){return this.circles.push(new s({canvas:this.canvas,context:this.context,centerX:this.centerX,centerY:this.centerY,innerRadius:this.minRadius+this.circles.length*(this.gapWidth+this.arcWidth),arcWidth:this.arcWidth,infoLineLength:this.infoLineLength,horizLineLength:this.horizLineLength,id:this.circles.length,fillColor:i.fillColor,outlineColor:i.outlineColor,progressListener:i.progressListener,infoListener:i.infoListener,infoLineAngle:this.infoLineBaseAngle+this.circles.length*this.infoLineAngleInterval})),this},start:function(i){var t=this;return this.timer=setInterval(function(){t._update()},i||33),this},update:function(i){this._update(i)},stop:function(){clearTimeout(this.timer)},_update:function(s){return this._clear(),this.circles.forEach(function(i,t,e){i.update(s)}),this},_clear:function(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this}};var s=function(i){if(this.id=i.id,this.canvas=i.canvas,this.context=i.context,this.centerX=i.centerX,this.centerY=i.centerY,this.arcWidth=i.arcWidth,this.innerRadius=i.innerRadius||0,this.fillColor=i.fillColor||"#fff",this.outlineColor=i.outlineColor||this.fillColor,this.progressListener=i.progressListener,this.infoLineLength=i.infoLineLength||250,this.horizLineLength=i.horizLineLength||50,this.infoListener=i.infoListener,this.infoLineAngle=i.infoLineAngle,this.outerRadius=this.innerRadius+this.arcWidth,this.infoListener){var t=this.infoLineAngle,e=(this.innerRadius+this.outerRadius)/2,s=Math.sin(t),n=Math.cos(t);this.infoLineStartX=this.centerX+s*e,this.infoLineStartY=this.centerY-n*e,this.infoLineMidX=this.centerX+s*this.infoLineLength,this.infoLineMidY=this.centerY-n*this.infoLineLength,this.infoLineEndX=this.infoLineMidX+(s<0?-this.horizLineLength:this.horizLineLength),this.infoLineEndY=this.infoLineMidY;var h=r.createElement("div"),o=h.style;o.color=this.fillColor,o.position="absolute",o.left=this.infoLineEndX+a(this.canvas)[0]+"px",h.className="ProgressCircleInfo",h.id="progress_circle_info_"+this.id,r.body.appendChild(h),this.infoText=h}};s.prototype={constructor:s,update:function(i){this.progress=i||this.progressListener(),this._draw(),this.infoListener&&(this.info=this.infoListener(),this._drawInfo())},_draw:function(){var i=this.context,t=0+-Math.PI/2,e=t+this.progress*Math.PI*2,s=this.centerX,n=this.centerY,h=this.innerRadius,o=this.outerRadius;return i.fillStyle=this.fillColor,i.strokeStyle=this.outlineColor,i.beginPath(),i.arc(s,n,h,t,e,!1),i.arc(s,n,o,e,t,!0),i.closePath(),i.stroke(),i.fill(),this},_drawInfo:function(){var i,t;return i=[[this.infoLineStartX,this.infoLineStartY],[this.infoLineMidX,this.infoLineMidY],[this.infoLineEndX,this.infoLineEndY]],this._drawSegments(i,!1),this.infoText.innerHTML=this.info,t=this.infoText.offsetHeight,this.infoText.style.top=this.infoLineEndY+a(this.canvas)[1]-t/2+"px",this},_drawSegments:function(i,t){var e=this.context;e.beginPath(),e.moveTo(i[0][0],i[0][1]);for(var s=1;s<i.length;++s)e.lineTo(i[s][0],i[s][1]);t&&e.closePath(),e.stroke()}},i.ProgressCircle=e}(window,document);