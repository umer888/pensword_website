jQuery(function(r){manager={params:wc_braintree_client_manager_params,upated_checkout_count:0,init:function(){this.container=this.get_container_class(),this.currency=this.get_currency(),r(document.body).on("update_checkout",this.update_currency),r(document.body).on("updated_checkout",this.updated_checkout),this.create_client()},create_client:function(){"undefined"!=typeof wc_braintree_client_token?braintree.client.create({authorization:wc_braintree_client_token},function(e,n){e?manager.submit_error(e):(manager.client=n,r(document.body).triggerHandler("wc_braintree_client_created",[n,wc_braintree_client_token]))}):manager.submit_error({code:"INVALID_CLIENT_TOKEN"})},submit_error:function(e){r(document.body).triggerHandler("wc_braintree_submit_error",{error:e,element:manager.container})},get_container_class:function(){return r("body").hasClass("woocommerce-cart")?"div.woocommerce":r("body").hasClass("woocommerce-checkout")?"ul.payment_methods":r("body").hasClass("woocommerce-add-payment-method")?"div.woocommerce":r("body").hasClass("single-product")?"div.woocommerce-notices-wrapper":void 0},update_currency:function(){manager.currency=manager.get_currency()},get_currency:function(){return r("#wc_braintree_cart_currency").val()},updated_checkout:function(){manager.upated_checkout_count++,manager.currency!==manager.get_currency()&&(manager.get_client_token(),manager.currency=manager.get_currency(),manager.upated_checkout_count=0)},get_client_token:function(){r.when(r.ajax({method:"POST",url:manager.params.url,data:{_wpnonce:manager.params._wpnonce}})).done(function(e){wc_braintree_client_token=e,manager.create_client()}).fail(function(e,n,r){})}},manager.init()});