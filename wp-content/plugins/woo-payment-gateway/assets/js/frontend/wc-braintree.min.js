!function(e){window.wc_braintree={utils:{}},wc_braintree.BaseGateway=function(){this.gateway_id=this.params.gateway,this.container="li.payment_method_"+this.gateway_id,this.nonce_selector='[name="'+this.params.nonce_selector+'"]',this.device_data_selector='[name="'+this.params.device_data_selector+'"]',this.tokenized_response_selector='[name="'+this.params.tokenized_response_selector+'"]',e(document.body).on("wc_braintree_refreshed_token",this.set_refresh_token.bind(this)),e(document.body).on("wc_braintree_client_created",this.create_instance.bind(this)),this.initialize()},wc_braintree.BaseGateway.prototype.create_instance=function(e,t,i){},wc_braintree.BaseGateway.prototype.getBrowserLocales=function(){var e=window.navigator,t=e.languages?Array.prototype.slice.apply(e.languages):[];return e.language&&t.push(e.language),e.userLanguage&&t.push(e.userLanguage),t.map(function(e){if(e&&e.match(/^[a-z]{2}[-_][A-Z]{2}$/)){var t=e.split(/[-_]/),i=t[0];return{country:t[1],lang:i}}return e&&e.match(/^[a-z]{2}$/)?{lang:e}:null}).filter(Boolean)},wc_braintree.BaseGateway.prototype.block=function(){e.blockUI({message:null,overlayCSS:{background:"#fff",opacity:.6}})},wc_braintree.BaseGateway.prototype.unblock=function(){e.unblockUI()},wc_braintree.BaseGateway.prototype.set_refresh_token=function(e,t){this.params._wp_rest_nonce=t},wc_braintree.BaseGateway.prototype.get_cart_total=function(){return e("#wc_braintree_cart_total").val()},wc_braintree.BaseGateway.prototype.set_cart_total=function(t){return e("#wc_braintree_cart_total").val(t)},wc_braintree.BaseGateway.prototype.get_recurring_cart_total=function(){return e("#wc_braintree_recurring_cart_total").val()},wc_braintree.BaseGateway.prototype.has_recurring_total=function(){return e("#wc_braintree_recurring_cart_total").length>0},wc_braintree.BaseGateway.prototype.get_currency=function(){return e("#wc_braintree_cart_currency").val()},wc_braintree.BaseGateway.prototype.get_button=function(){return this.$button},wc_braintree.BaseGateway.prototype.get_merchant_account=function(){return e("#wc_braintree_merchant_account").val()},wc_braintree.BaseGateway.prototype.set_device_data=function(){this.dataCollectorInstance&&e(this.device_data_selector).val(this.dataCollectorInstance.deviceData)},wc_braintree.BaseGateway.prototype.set_nonce=function(t){e(this.nonce_selector).val(t)},wc_braintree.BaseGateway.prototype.get_form=function(){return e(this.container).closest("form")},wc_braintree.BaseGateway.prototype.needs_shipping=function(){return"1"===this.params.needs_shipping},wc_braintree.BaseGateway.prototype.initialize=function(){},wc_braintree.BaseGateway.prototype.is_valid_checkout=function(){return!0},wc_braintree.BaseGateway.prototype.form_to_data=function(t){var i=t.find("input").filter(function(t,i){return!e(i).is('[name^="add-to-cart"]')}.bind(this)).serializeArray(),n={};for(var a in i){var r=i[a];n[r.name]=r.value}return n},wc_braintree.BaseGateway.prototype.add_to_cart=function(t){return t&&t.preventDefault(),new Promise(function(t,i){this.block();var n={product_id:this.get_product_data().post_id,variation_id:e('[name="variation_id"]').val(),qty:this.get_product_quantity(),payment_method:this.gateway_id};e.ajax({url:this.params.routes.add_to_cart,method:"POST",dataType:"json",data:n,beforeSend:function(e,t){e.setRequestHeader("X-WP-Nonce",this.params._wp_rest_nonce)}.bind(this),success:function(i,n,a){this.unblock(),e(document.body).triggerHandler("wc_braintree_refreshed_token",a.getResponseHeader("X-WP-Nonce")),i.success?t(i):this.submit_error(i.messages)}.bind(this),error:function(e,t,n){this.unblock(),this.submit_error(n),i(n)}.bind(this)})}.bind(this))},wc_braintree.BaseGateway.prototype.process_order=function(){if(this.is_valid_checkout()){var t=e.extend({},this.form_to_data(this.get_form()),{payment_method:this.gateway_id},this.get_process_order_data());this.block(),e.ajax({method:"POST",url:this.params.routes.checkout,data:t,dataType:"json",beforeSend:function(e,t){e.setRequestHeader("X-WP-Nonce",this.params._wp_rest_nonce)}.bind(this),success:function(e,t,i){e.reload?window.location.reload():"success"===e.result?window.location=e.redirect:(e.messages&&this.submit_error(e.messages),this.set_nonce(""),this.unblock())}.bind(this),error:function(e,t,i){this.set_nonce(""),this.submit_error(i),this.unblock()}.bind(this)})}else this.submit_error(this.params.messages.terms)},wc_braintree.BaseGateway.prototype.update_shipping_address=function(t){return new Promise(function(i,n){e.ajax({method:"POST",url:this.params.routes.shipping_address,data:{payment_method:this.gateway_id,address:t},dataType:"json",beforeSend:function(e,t){e.setRequestHeader("X-WP-Nonce",this.params._wp_rest_nonce)}.bind(this),success:function(e,t,a){e.code?n(e):i(e)}.bind(this),error:function(e,t,i){n(e,t,i)}.bind(this)})}.bind(this))},wc_braintree.BaseGateway.prototype.update_shipping_method=function(t){return new Promise(function(i,n){e.ajax({method:"POST",url:this.params.routes.shipping_method,data:{payment_method:this.gateway_id,shipping_methods:t},dataType:"json",beforeSend:function(e,t){e.setRequestHeader("X-WP-Nonce",this.params._wp_rest_nonce)}.bind(this),success:function(e,t,a){e.code?n(e):(this.set_selected_shipping_method(e.data.chosen_shipping_methods),i(e))}.bind(this),error:function(e,t,i){n()}.bind(this)})}.bind(this))},wc_braintree.BaseGateway.prototype.get_process_order_data=function(){return{}},wc_braintree.BaseGateway.prototype.map_shipping_address=function(e){},wc_braintree.BaseGateway.prototype.set_selected_shipping_method=function(t){if(t&&e('[name^="shipping_method"]').length)for(var i in t)e('[name="shipping_method['+i+']"][value="'+t[i]+'"]').prop("checked",!0).trigger("change")},wc_braintree.BaseGateway.prototype.initialize_fraud_tools=function(){this.params.advanced_fraud.enabled&&braintree.dataCollector.create(this.get_fraud_tool_options(),function(e,t){if(e){if("DATA_COLLECTOR_KOUNT_NOT_ENABLED"===e.code)return;this.submit_error(e)}else this.dataCollectorInstance=t}.bind(this))},wc_braintree.BaseGateway.prototype.get_fraud_tool_options=function(){return{client:this.clientInstance,kount:!0}},wc_braintree.BaseGateway.prototype.on_payment_method_received=function(e){},wc_braintree.BaseGateway.prototype.submit_error=function(t){this.clear_error(),e(document.body).triggerHandler("wc_braintree_submit_error",{error:t,element:this.message_container})},wc_braintree.BaseGateway.prototype.clear_error=function(){e("#wc_braintree_checkout_error").remove()},wc_braintree.BaseGateway.prototype.terms_updated=function(){},wc_braintree.BaseGateway.prototype.get_first_name=function(t){return e(t+"_first_name").length?e(t+"_first_name").val():""},wc_braintree.BaseGateway.prototype.get_last_name=function(t){return e(t+"_last_name").length?e(t+"_last_name").val():""},wc_braintree.BaseGateway.prototype.get_shipping_prefix=function(){return"#billing"},wc_braintree.CartGateway=function(){this.container="li.wc_braintree_cart_gateway_"+this.gateway_id,this.message_container=".shop_table",this.form_id="#wc-braintree-cart-fields-form",e(document.body).on("change",'[name="terms"]',this.terms_updated.bind(this))},wc_braintree.CartGateway.prototype.needs_shipping=function(){return 1===e("#wc_braintree_needs_shipping").data("value")},wc_braintree.CartGateway.prototype.on_payment_method_received=function(e){this.process_order()},wc_braintree.CartGateway.prototype.get_form=function(){return e(this.form_id)},wc_braintree.CartGateway.prototype.is_valid_checkout=function(){return!(e('[name="terms"]').length&&!e('[name="terms"]').is(":checked"))},wc_braintree.CartGateway.prototype.get_cart_total=function(){return e("#wc_braintree_cart_total").val()},wc_braintree.CartGateway.prototype.add_cart_totals_class=function(){e(".cart_totals").addClass("braintree_cart_gateway_active")},wc_braintree.ProductGateway=function(){this.container="li.wc_braintree_product_gateway_"+this.gateway_id,this.message_container="div.product",this.buttonWidth=e("div.quantity").outerWidth(!0)+e(".single_add_to_cart_button").outerWidth(),this.get_form().on("found_variation",this.found_variation.bind(this)),this.get_form().on("reset_data",this.reset_variation_data.bind(this)),e(this.container).css("max-width",this.buttonWidth+"px")},wc_braintree.ProductGateway.prototype.on_payment_method_received=function(){this.process_order()},wc_braintree.ProductGateway.prototype.get_product_data=function(){return e("#wc_braintree_product_data").data("product")},wc_braintree.ProductGateway.prototype.set_product_data=function(t){return e("#wc_braintree_product_data").data("product",t)},wc_braintree.ProductGateway.prototype.get_product_quantity=function(){return parseInt(e('[name="quantity"]').val())},wc_braintree.ProductGateway.prototype.get_product_amount=function(){return this.get_product_data().price*this.get_product_quantity()},wc_braintree.ProductGateway.prototype.found_variation=function(e,t){var i=this.get_product_data();i.price=t.display_price,i.needs_shipping=!t.is_virtual,this.set_product_data(i),this.$button&&this.get_button().prop("disabled",!1).removeClass("disabled")},wc_braintree.ProductGateway.prototype.reset_variation_data=function(){this.$button&&this.get_button().prop("disabled",!0).addClass("disabled")},wc_braintree.ProductGateway.prototype.needs_shipping=function(){return this.get_product_data().needs_shipping},wc_braintree.CheckoutGateway=function(){this.token_selector='[name="'+this.params.token_selector+'"]',this.payment_type_selector='[name="'+this.params.payment_type_selector+'"]',this.container=this.message_container="li.payment_method_"+this.gateway_id,this.banner_container=".wc_braintree_banner_gateway_"+this.gateway_id,this.list_container="li.payment_method_"+this.gateway_id,this.banner_enabled="1"===this.params.banner_enabled,e(this.container).closest("form").on("checkout_place_order_"+this.gateway_id,this.pre_submit_validations.bind(this)),e(this.container).closest("form").on("checkout_place_order_"+this.gateway_id,this.woocommerce_form_submit.bind(this)),e(document.body).on("wc_braintree_pre_form_submit_"+this.gateway_id,this.set_device_data.bind(this)),e(document.body).on("updated_checkout",this.updated_checkout.bind(this)),e(document.body).on("checkout_error",this.checkout_error.bind(this)),e(document.body).on("change",'[name="terms"]',this.terms_updated.bind(this)),this.banner_enabled&&e(".woocommerce-billing-fields").length&&e(this.banner_container).css("max-width",e(".woocommerce-billing-fields").outerWidth(!0)),this.order_review()},wc_braintree.CheckoutGateway.prototype.on_payment_method_received=function(e){this.tokenize_response=e,this.payment_method_received=!0,this.set_nonce(e.nonce),this.hide_payment_button(),this.show_place_order()},wc_braintree.CheckoutGateway.prototype.order_review=function(){var e=window.location.href.match(/order_review.+payment_method=([\w]+).+payment_nonce=(.+)/);if(e&&e.length>1){var t=e[1],i=e[2];this.gateway_id===t&&(this.payment_method_received=!0,this.set_nonce(i),this.set_use_nonce_option())}},wc_braintree.CheckoutGateway.prototype.hide_payment_button=function(){this.$button&&this.$button.hide()},wc_braintree.CheckoutGateway.prototype.hide_place_order=function(){e("#place_order").addClass("wc-braintree-hide")},wc_braintree.CheckoutGateway.prototype.show_place_order=function(){e("#place_order").removeClass("wc-braintree-hide")},wc_braintree.CheckoutGateway.prototype.get_shipping_prefix=function(){return this.needs_shipping()&&e('[name="ship_to_different_address"]').is(":checked")?"#shipping":"#billing"},wc_braintree.CheckoutGateway.prototype.woocommerce_form_submit=function(){return!!this.is_payment_method_selected()||this.payment_method_received},wc_braintree.CheckoutGateway.prototype.is_valid_checkout=function(){return!(e('[name="terms"]').length&&!e('[name="terms"]').is(":checked"))},wc_braintree.CheckoutGateway.prototype.pre_submit_validations=function(e){return!!this.is_valid_checkout()||(e.stopImmediatePropagation(),this.submit_error(this.params.messages.terms),!1)},wc_braintree.CheckoutGateway.prototype.payment_gateway_changed=function(e,t){t===this.gateway_id?this.is_payment_method_selected()||this.payment_method_received?(this.$button.hide(),this.show_place_order()):(this.$button.show(),this.hide_place_order()):this.$button.hide()},wc_braintree.CheckoutGateway.prototype.create_button=function(){},wc_braintree.CheckoutGateway.prototype.updated_checkout=function(t){this.create_button(),this.payment_method_received&&e("#"+this.gateway_id+"_use_nonce").trigger("click")},wc_braintree.CheckoutGateway.prototype.checkout_error=function(e){this.is_gateway_selected()&&this.has_checkout_error()&&(this.payment_method_received=!1,this.tokenize_response=null,this.payment_gateway_changed(null,this.gateway_id))},wc_braintree.CheckoutGateway.prototype.is_gateway_selected=function(){return this.get_selected_gateway()===this.gateway_id},wc_braintree.CheckoutGateway.prototype.get_selected_gateway=function(){return e('input[name="payment_method"]:checked').val()},wc_braintree.CheckoutGateway.prototype.has_checkout_error=function(){return e("#wc_braintree_checkout_error").length>0},wc_braintree.CheckoutGateway.prototype.is_payment_method_selected=function(){return!!e(this.token_selector).length&&"token"===e(this.payment_type_selector+":checked").val()},wc_braintree.CheckoutGateway.prototype.display_saved_methods=function(e,t){this.gateway_id==t&&this.$button&&(this.$button.hide(),this.show_place_order())},wc_braintree.CheckoutGateway.prototype.display_new_payment_method_container=function(e,t){this.gateway_id==t&&this.$button&&(this.payment_method_received||(this.$button.show(),this.hide_place_order()))},wc_braintree.CheckoutGateway.prototype.needs_shipping=function(){return"1"===this.params.needs_shipping},wc_braintree.CheckoutGateway.prototype.get_payment_token=function(){return e(this.token_selector).val()},wc_braintree.blockUI={message:null,overlayCSS:{background:"#fff",opacity:.6}},wc_braintree.CheckoutGateway.prototype.set_use_nonce_option=function(t){e("#"+this.gateway_id+"_use_nonce").prop("checked",t).trigger("click")},wc_braintree.CheckoutGateway.prototype.set_payment_method=function(t){e('[name="payment_method"][value="'+t+'"]').prop("checked",!0).trigger("click")},wc_braintree.CheckoutGateway.prototype.show_checkout_gateway=function(){e(this.container).show()},wc_braintree.CheckoutGateway.prototype.hide_checkout_gateway=function(){e(this.container).hide()},wc_braintree.CheckoutGateway.prototype.validate_checkout_fields=function(){if("undefined"==typeof wc_braintree_checkout_fields)return!0;var t=Object.keys(wc_braintree_checkout_fields.billing),i=Object.keys(wc_braintree_checkout_fields.shipping);function n(t,i){for(var n=0;n<t.length;n++){if(i[t[n]].required){var a=e("#"+t[n]).val();if(void 0===a||0==a.length)return void(valid=!1)}}}return valid=!0,n(t,wc_braintree_checkout_fields.billing),this.needs_shipping()&&e("#ship-to-different-address-checkbox").is(":checked")&&n(i,wc_braintree_checkout_fields.shipping),valid=this.is_valid_checkout(),valid},wc_braintree.PayPal=function(){if(wc_braintree.BaseGateway.call(this),void 0===this.get_amount)throw"Instance must have get_amount function";this.create_button()},wc_braintree.PayPal.prototype=Object.create(wc_braintree.BaseGateway.prototype),wc_braintree.PayPal.prototype.create_instance=function(e,t,i){return new Promise(function(e,n){this.clientInstance=t,this.client_token=i,this.initialize_fraud_tools(),options={client:t,authorization:i,merchantAccountId:this.get_merchant_account()},braintree.paypalCheckout.create(options,function(t,i){if(t)return this.submit_error(t),void n();this.paypalInstance=i,e()}.bind(this))}.bind(this))},wc_braintree.PayPal.prototype.get_fraud_tool_options=function(){return e.extend({},wc_braintree.BaseGateway.prototype.get_fraud_tool_options.call(this),{paypal:!0})},wc_braintree.PayPal.prototype.create_button=function(){return new Promise(function(e,t){this.get_button_container().find(".paypal-button").remove(),paypal.Button.render(this.render_options(),this.get_button_container()[0]),this.$button=this.get_button_container().find(".paypal-button"),e()}.bind(this))},wc_braintree.PayPal.prototype.render_options=function(){var t={locale:this.params.locale,style:this.params.button_style,funding:this.get_funding(),env:this.params.environment,validate:function(e){this.actions=e}.bind(this),onClick:function(e){}.bind(this),payment:function(e,t){var i=this.get_options();this.paypalInstance.createPayment(i,function(n,a){n&&(""==this.get_merchant_account()?n.code="PAYPAL_MERCHANT_ACCOUNT_EMPTY":i.shippingAddressOverride&&(n.code="PAYPAL_INVALID_ADDRESS"),this.submit_error(n),t(n)),e(a)}.bind(this))}.bind(this),onAuthorize:function(t,i){return this.paypalInstance.tokenizePayment(t,function(n,a){this.tokenize_response=a,this.set_nonce(a.nonce),this.set_device_data(),this.payment_method_received=!0,this.update_addresses(a.details),e('[name="payment_method"]').val(this.gateway_id),this.on_payment_method_received(a,t,i)}.bind(this))}.bind(this),onCancel:function(e){},onError:function(e){e.message.indexOf("props.locale")>-1?this.submit_error(this.params.messages.invalid_locale):this.submit_error(e)}.bind(this)};this.needs_shipping()&&"checkout"===this.params.options.flow&&(t.onShippingChange=function(e,t){var i=e.shipping_address;this.update_shipping_address({city:i.city,state:i.state,postcode:i.postal_code,country:i.country_code}).then(function(){t.resolve()}).catch(function(){t.reject()})}.bind(this));var i=null,n=this.getBrowserLocales(),a=n.length>0&&n[0].lang+"_"+n[0].country;return a&&(i=a.match(/([\w]{2})_undefined/))&&(a=i[1]+"_"+i[1].toUpperCase()),a&&this.params.locales.indexOf(a)>-1&&(t.locale=a),t},wc_braintree.PayPal.prototype.get_user_locale=function(){var e=null,t=this.getBrowserLocales(),i=t.length>0&&t[0].lang+"_"+t[0].country;return i&&(e=i.match(/([\w]{2})_undefined/))&&(i=e[1]+"_"+e[1].toUpperCase()),i&&this.params.locales.indexOf(i)>-1?i:this.params.locale},wc_braintree.PayPal.prototype.get_options=function(){var t={amount:this.get_amount(),enableShippingAddress:this.needs_shipping(),shippingAddressEditable:this.needs_shipping()};if(this.needs_shipping()){var i=this.get_shipping_prefix();this.valid_address(this.get_address_object(i),i)&&(t.shippingAddressOverride=this.get_address_object(i))}return(t=e.extend({},this.params.options,t)).locale=this.get_user_locale(),t},wc_braintree.PayPal.prototype.get_funding=function(){return{allowed:[],disallowed:[paypal.FUNDING.CREDIT,paypal.FUNDING.CARD,paypal.FUNDING.VENMO,paypal.FUNDING.ELV,paypal.FUNDING.IDEAL,paypal.FUNDING.BANCONTACT,paypal.FUNDING.GIROPAY,paypal.FUNDING.SOFORT,paypal.FUNDING.EPS,paypal.FUNDING.MYBANK,paypal.FUNDING.MYBANK,paypal.FUNDING.P24,paypal.FUNDING.ZIMPLER]}},wc_braintree.PayPal.prototype.get_button_container=function(){return e("#place_order").parent()},wc_braintree.PayPal.prototype.get_address_mappings=function(){return{recipientName:{set:function(t,i){var n=t.split(" ",2);n.length>=1&&e(i+"_first_name").val(n[0]),n.length>=2&&e(i+"_last_name").val(n[1])},get:function(t){return e(t+"_first_name").val()+" "+e(t+"_last_name").val()},required:!1},line1:{set:function(t,i){e(i+"_address_1").val(t)},get:function(t){return e(t+"_address_1").val()},required:!0},line2:{set:function(t,i){return e(i+"_address_2").val(t)},get:function(t){return e(t+"_address_2").val()},required:!1},city:{set:function(t,i){e(i+"_city").val(t)},get:function(t){return e(t+"_city").val()},required:!0},countryCode:{set:function(t,i){e(i+"_country").val(t)},get:function(t){return e(t+"_country").val()},required:!0},postalCode:{set:function(t,i){e(i+"_postcode").val(t)},get:function(t){return e(t+"_postcode").val()},required:!0},state:{set:function(t,i){e(i+"_state").val(t)},get:function(t){return e(t+"_state").val()},required:function(t){if("undefined"!=typeof wc_address_i18n_params){var i=JSON.parse(wc_address_i18n_params.locale),n=e(t+"_country").val();if(i&&i[n]&&i[n].state)return void 0===i[n].state.required||i[n].state.required}return e(t+"_state").length>0&&e(t+"_state").is(":visible")}},phone:{set:function(t,i){e("#billing_phone").val(t)},get:function(t){return e("#billing_phone").val()},required:!1}}},wc_braintree.PayPal.prototype.update_addresses=function(t){if((!this.valid_address(this.get_address_object("#billing"),"#billing")||t.billingAddress)&&(t.billingAddress||t.shippingAddress&&!e('[name="ship_to_different_address"]').is(":checked"))){var i=t.billingAddress?t.billingAddress:t.shippingAddress;i&&!e.isEmptyObject(i)&&this.populate_address_fields(i,"#billing")}this.populate_detail_fields(t),t.shippingAddress&&!e.isEmptyObject(t.shippingAddress)&&(e('[name^="shipping_"]').length>0&&this.populate_address_fields(t.shippingAddress,"#shipping"),e('[name*="_state"], [name*="_country"]').trigger("change"))},wc_braintree.PayPal.prototype.populate_address_fields=function(t,i){e.each(this.get_address_mappings(),function(e,n){t[e]&&n.set(t[e],i)})},wc_braintree.PayPal.prototype.get_address_object=function(t){var i={};return e.each(this.get_address_mappings(),function(e,n){i[e]=n.get(t)}),i},wc_braintree.PayPal.prototype.valid_address=function(t,i){var n=!0;return!e.isEmptyObject(t)&&(mappings=this.get_address_mappings(),e.each(mappings,function(e,a){("function"==typeof a.required?a.required(i):a.required)&&(t[e]&&void 0!==t[e]&&0!=t[e].length||(n=!1))}),n)},wc_braintree.PayPal.prototype.populate_detail_fields=function(t){t.firstName&&e('[name="billing_first_name"]').val(t.firstName),t.lastName&&e('[name="billing_last_name"]').val(t.lastName),t.email&&e('[name="billing_email"]').val(t.email),t.phone&&e('[name="billing_phone"]').val(t.phone)},wc_braintree.PayPal.prototype.get_address_hash=function(e){for(var t=["recipientName","line1","line2","city","state","postalCode","countryCode"],i=this.get_address_mappings(),n="",a=0;a<t.length;a++)i[t[a]]&&(n+=i[t[a]].get.call(this,e));return n},wc_braintree.PayPal.prototype.open_shipping_modal=function(t,i){var n=this.params.shipping_window_url;i=i||{};function a(t){t.preventDefault(),e(".wc-braintree-shipping-modal-overlay").remove(),e(".wc-braintree-shipping-modal").remove(),e("body").removeClass("shipping-modal-active")}function r(){e("#preloaderSpinner").hide()}t&&(n+=(-1!=n.indexOf("?")?"&":"?")+e.param(t)),e.ajax({method:"GET",dataType:"html",url:n,success:function(t){this.unblock(),function(t){var n=e("<div>",{class:"wc-braintree-shipping-modal-overlay"}),o=e("<div>",{class:"wc-braintree-shipping-modal"});o.append(t).show(),e("body").addClass("shipping-modal-active").append(n).append(o),e('[name^="wc_shipping_method"]').on("click",function(t){!function(){e("#preloaderSpinner").height(e(".paypal-shipping-methods").outerHeight()+20).show();var t=e(".wc-braintree-shipping-modal").height(),i=e(".wc-braintree-shipping-modal").scrollTop(),n=t/2+i;e(".spinWrap").css("top",n)}();var n={};n[e(t.target).data("index")]=e(t.target).val(),this.update_shipping_method(n).then(function(t){r(),e(".cart-totals").replaceWith(t.data.cart_totals),i.onShippingMethodSelected&&i.onShippingMethodSelected.call(this,data)}.bind(this)).catch(function(){r()}.bind(this))}.bind(this)),e(".wc-braintree-shipping-modal #place_order").on("click",function(e){a(e),this.process_order()}.bind(this)),e(".wc-braintree-shipping-modal #close").on("click",a)}.call(this,t)}.bind(this),error:function(){this.unblock()}.bind(this)})},wc_braintree.PayPal.prototype.map_shipping_address=function(e){return{address_1:e.line1,address_2:e.line2,city:e.city,postcode:e.postalCode,state:e.state,country:e.countryCode}},wc_braintree.GooglePay=function(){wc_braintree.BaseGateway.call(this),this.create_payments_client(),this.create_button()},wc_braintree.GooglePay.prototype=Object.create(wc_braintree.BaseGateway.prototype),wc_braintree.GooglePay.prototype.dynamic_price_enabled=function(){return"1"===this.params.dynamic_price},wc_braintree.GooglePay.prototype.get_environment=function(){return e("#wc_braintree_googlepay_environment").val()},wc_braintree.GooglePay.prototype.get_merchant_id=function(){return e("#wc_braintree_googlepay_merchant_id").val()},wc_braintree.GooglePay.prototype.get_total_price=function(){},wc_braintree.GooglePay.prototype.after_payment_data_callback=function(){},wc_braintree.GooglePay.prototype.create_payments_client=function(){var e={environment:this.get_environment()};this.dynamic_price_enabled()&&(e.paymentDataCallbacks={onPaymentAuthorized:function(e){return new Promise(function(e,t){e({transactionState:"SUCCESS"})}.bind(this))}.bind(this)},this.needs_shipping()&&(e.paymentDataCallbacks.onPaymentDataChanged=function(e){return new Promise(function(t,i){this.payment_data_callback(e).then(function(e){t(e.data.requestUpdate),this.after_payment_data_callback(e.data)}.bind(this)).catch(function(e){t(e.data)}.bind(this))}.bind(this))}.bind(this))),this.paymentsClient=new google.payments.api.PaymentsClient(e)},wc_braintree.GooglePay.prototype.create_instance=function(e,t,i){return new Promise(function(e,i){this.clientInstance=t,braintree.googlePayment.create({client:t,googlePayVersion:2,googleMerchantId:this.get_merchant_id()},function(t,n){t?this.submit_error(t):(this.googlePayInstance=n,this.initialize_fraud_tools(),this.paymentsClient.isReadyToPay({apiVersion:2,apiVersionMinor:0,allowedPaymentMethods:n.createPaymentDataRequest().allowedPaymentMethods}).then(function(t){t.result?(this.cannot_pay=!1,e(t)):(this.cannot_pay=!0,i(t))}.bind(this)).catch(function(e){this.submit_error({message:e.statusMessage})}.bind(this)))}.bind(this))}.bind(this))},wc_braintree.GooglePay.prototype.create_button=function(){return new Promise(function(t,i){this.$button&&this.$button.remove(),this.paymentsClient&&(this.$button=e(this.paymentsClient.createButton(e.extend({onClick:this.tokenize.bind(this)},this.params.button_options))),t())}.bind(this))},wc_braintree.GooglePay.prototype.tokenize=function(){var t=this.googlePayInstance.createPaymentDataRequest(this.get_payment_data_request()),i=t.allowedPaymentMethods[0];i.parameters.billingAddressRequired=!0,i.parameters.billingAddressParameters={format:"FULL",phoneNumberRequired:e("#billing_phone").length>0};try{this.paymentsClient.loadPaymentData(t).then(function(e){return this.paymentData=e,this.populate_address_fields(e),this.googlePayInstance.parseResponse(e)}.bind(this)).then(function(t){e(this.tokenized_response_selector).val(JSON.stringify(t)),this.set_nonce(t.nonce),this.set_device_data(),e('[name="payment_method"]').val(this.gateway_id),this.on_payment_method_received(t)}.bind(this)).catch(function(e){if("CANCELED"!==e.statusCode){var t={code:e.statusMessage.indexOf("whitelisted")>-1?"DEVELOPER_ERROR_WHITELIST":null,message:e.statusMessage};this.submit_error(t)}}.bind(this))}catch(e){this.submit_error({message:e})}},wc_braintree.GooglePay.prototype.get_payment_data_request=function(){var t={transactionInfo:{currencyCode:e("#wc_braintree_cart_currency").val(),totalPriceStatus:"FINAL",totalPrice:this.get_total_price(),totalPriceLabel:this.params.price_label,displayItems:this.get_display_items()},emailRequired:!0};return this.dynamic_price_enabled()&&(this.needs_shipping()?(t.shippingAddressParameters={},t.shippingAddressRequired=!0,t.callbackIntents=["PAYMENT_AUTHORIZATION","SHIPPING_ADDRESS","SHIPPING_OPTION"],t.shippingOptionRequired=!0):t.callbackIntents=["PAYMENT_AUTHORIZATION"]),t},wc_braintree.GooglePay.prototype.get_display_items=function(){return e("#wc_braintree_googlepay_display_items").data("items")},wc_braintree.GooglePay.prototype.set_display_items=function(t){e("#wc_braintree_googlepay_display_items").data("items",t)},wc_braintree.GooglePay.prototype.populate_address_fields=function(t){t.paymentMethodData.info.billingAddress&&(this.populate_address(t.paymentMethodData.info.billingAddress,"#billing"),t.email&&e("#billing_email").val(t.email)),t.shippingAddress&&this.populate_address(t.shippingAddress,"#shipping")},wc_braintree.GooglePay.prototype.populate_address=function(t,i){e.each(this.get_address_mappings(),function(e,n){t[e]&&n.set(t[e],i)})},wc_braintree.GooglePay.prototype.payment_data_callback=function(t){return new Promise(function(i,n){e.when(this.api_update_address(t)).done(function(e){e.code?n(e.data):(i(e),this.set_selected_shipping_method(e.data.chosen_shipping_methods))}.bind(this))}.bind(this))},wc_braintree.GooglePay.prototype.api_update_address=function(t){return e.ajax({url:this.params.routes.shipping_data,method:"POST",dataType:"json",data:{address:t.shippingAddress,shippingOptions:t.shippingOptionData},beforeSend:function(e,t){e.setRequestHeader("X-WP-Nonce",this.params._wp_rest_nonce)}.bind(this)})},wc_braintree.GooglePay.prototype.valid_address=function(t){var i=!0;return!e.isEmptyObject(t)&&(mappings=this.get_address_mappings(),e.each(mappings,function(e,n){n.required&&(t[e]&&void 0!==t[e]&&0!=t[e].length||(i=!1))}),i)},wc_braintree.GooglePay.prototype.get_address_object=function(t){var i={};return e.each(this.get_address_mappings(),function(e,n){i[e]=n.get(t)}),i},wc_braintree.GooglePay.prototype.get_address_hash=function(t){var i=this.get_address_mappings(),n="";return e.each(["name","postalCode","countryCode","address1","address2","locality","administrativeArea"],function(e,a){n+=i[a].get(t)}),n},wc_braintree.GooglePay.prototype.block=function(){e.blockUI({message:null,overlayCSS:{background:"#fff",opacity:.6}})},wc_braintree.GooglePay.prototype.unblock=function(){e.unblockUI()},wc_braintree.GooglePay.prototype.clear_error=function(){this.paymentData=null,e("#wc_braintree_checkout_error").remove()},wc_braintree.GooglePay.prototype.get_address_mappings=function(){return{name:{set:function(t,i){(t=t.split(" ")).length>=1&&e(i+"_first_name").val(t[0]),t.length>=2&&e(i+"_last_name").val(t[1])},get:function(t){var i="";return e(t+"_first_name").length&&(i=e(t+"_first_name").val()),e(t+"_last_name").length&&(i=""!==i?" "+e(t+"_last_name").val():e(t+"_last_name").val()),i},required:!0},postalCode:{set:function(t,i){e(i+"_postcode").val(t)},get:function(t){return e(t+"_postcode").val()},required:!0},countryCode:{set:function(t,i){e(i+"_country").val(t)},get:function(t){return e(t+"_country").val()},required:!0},phoneNumber:{set:function(t,i){e(i+"_phone").val(t)},get:function(t){return e(t+"_phone").val()}},address1:{set:function(t,i){e(i+"_address_1").val(t)},get:function(t){return e(t+"_address_1").val()},required:!0},address2:{set:function(t,i){e(i+"_address_2").val(t)},get:function(t){return e(t+"_address_2").val()}},locality:{set:function(t,i){e(i+"_city").val(t)},get:function(t){return e(t+"_city").val()},required:!0},administrativeArea:{set:function(t,i){e(i+"_state").val(t)},get:function(t){return e(t+"_state").val()},required:!0}}},wc_braintree.CreditCard=function(){wc_braintree.BaseGateway.call(this),this._3ds_vaulted_nonce_selector='[name="'+this.params._3ds_vaulted_nonce_selector+'"]',this.config_selector='[name="'+this.params.config_selector+'"]'},wc_braintree.CreditCard.prototype=Object.create(wc_braintree.BaseGateway.prototype),wc_braintree.CreditCard.prototype.create_instance=function(e,t,i){this.clientInstance=t,this.client_token=i,this.config=t.getConfiguration().gatewayConfiguration,this.initialize_fraud_tools(),this.initialize_3d_secure()},wc_braintree.CreditCard.prototype.initialize_3d_secure=function(){this._3ds_enabled()&&braintree.threeDSecure.create({version:2,client:this.clientInstance},function(e,t){if(e)return this.threeds_error=e,void this.submit_error(e);this.threeDSecureInstance=t}.bind(this))},wc_braintree.CreditCard.prototype.set_config_data=function(){e(this.config_selector).val(JSON.stringify(this.config))},wc_braintree.CreditCard.prototype.get_hosted_fields=function(){this.hosted_fields={};var t=this;return e.each(this.params.custom_fields,function(i,n){e("#"+n.id).length&&n.type&&(t.hosted_fields[n.type]={selector:"#"+n.id,placeholder:n.placeholder})}),e.each(this.hosted_fields,function(i,n){var a=!1;switch(i){case"cvv":-1===t.config.challenges.indexOf("cvv")&&(a=!0);break;case"postalCode":!e("#wc-braintree-postal-code").length&&e("#billing_postcode").length?a=!0:-1!==t.config.challenges.indexOf("postal_code")||e("#billing_postcode").length||(a=!0)}a&&(e(n.selector).closest("."+i+"-container").remove(),e(document.body).triggerHandler("wc_braintree_hosted_field_removed",i),delete t.hosted_fields[i])}),this.hosted_fields},wc_braintree.CreditCard.prototype._3ds_enabled=function(){return"1"===e("#wc_braintree_3ds_enabled").val()},wc_braintree.CreditCard.prototype._3ds_active=function(){return"1"===e("#wc_braintree_3ds_active").val()},wc_braintree.CreditCard.prototype.payment_nonce_request=function(t){return e.ajax({type:"POST",url:this.params.urls._3ds.vaulted_nonce,data:{_wpnonce:this.params._wp_rest_nonce,token:t,version:2}})},wc_braintree.CreditCard.prototype.get_tokenization_options=function(){var t={billingAddress:{}};return e("#billing_address_1").length&&(t.billingAddress.streetAddress=e("#billing_address_1").val()),e("#billing_postcode").length&&(t.billingAddress.postalCode=e("#billing_postcode").val()),t},wc_braintree.CreditCard.prototype.process_3dsecure=function(t,i){if(this.threeDSecureInstance){var n=this.get_shipping_prefix();this.threeDSecureInstance.verifyCard({amount:this.has_recurring_total()?this.get_recurring_cart_total():this.get_cart_total(),nonce:t.nonce,bin:t.details.bin,email:e("#billing_email").val(),billingAddress:{givenName:this.get_first_name("#billing").replace(/[^\x00-\x7f]/g,""),surname:this.get_last_name("#billing").replace(/[^\x00-\x7f]/g,""),phoneNumber:e("#billing_phone").val(),streetAddress:e("#billing_address_1").val(),extendedAddress:e("#billing_address_2").val(),locality:e("#billing_city").val(),region:e("#billing_state").val(),postalCode:e("#billing_postcode").val(),countryCodeAlpha2:e("#billing_country").val()},additionalInformation:this.needs_shipping()?{shippingGivenName:this.get_first_name(n).replace(/[^\x00-\x7f]/g,""),shippingSurname:this.get_last_name(n).replace(/[^\x00-\x7f]/g,""),shippingAddress:{streetAddress:e(n+"_address_1").val(),extendedAddress:e(n+"_address_2").val(),locality:e(n+"_city").val(),region:e(n+"_state").val(),postalCode:e(n+"_postcode").val(),countryCodeAlpha2:e(n+"_country").val()}}:{},onLookupComplete:function(e,t){this.remove_loader(),t()}.bind(this)},function(t,n){if(t)return this.submit_error(t),void this.remove_loader();i&&e(this._3ds_vaulted_nonce_selector).val("true"),this.on_payment_method_received(n)}.bind(this)),i&&this.unblock_form()}},wc_braintree.CreditCard.prototype.process_3dsecure_vaulted=function(){this.block_form(),e.when(this.payment_nonce_request(this.get_payment_token())).done(function(e){e.success?this.process_3dsecure(e.data,!0):(this.submit_error(e.message),this.unblock_form())}.bind(this)).fail(function(e,t,i){this.submit_error({message:i}),this.unblock_form()}.bind(this))},wc_braintree.CreditCard.prototype.add_icon_class=function(t,i,n){e(n).addClass(this.params.icon_style)},wc_braintree.CreditCard.prototype.add_icon_type=function(){e(this.container).find(".wc-braintree-payment-methods-container").addClass(this.params.icon_style+"-icons")},wc_braintree.CreditCard.prototype.block_form=function(){e(this.container).closest("form").block(wc_braintree.blockUI)},wc_braintree.CreditCard.prototype.unblock_form=function(){e(this.container).closest("form").unblock()},wc_braintree.CreditCard.prototype.display_loader=function(){this.params.loader.enabled&&e(".wc-braintree-payment-loader").fadeIn(200)},wc_braintree.CreditCard.prototype.remove_loader=function(){e(".wc-braintree-payment-loader").fadeOut(200)},wc_braintree.ApplePay=function(){if(wc_braintree.BaseGateway.call(this),void 0===this.get_total_price)throw"get_total_price function must be implemented."},wc_braintree.ApplePay.prototype=Object.create(wc_braintree.BaseGateway.prototype),wc_braintree.ApplePay.prototype.create_instance=function(e,t,i){return this.clientInstance=t,this.initialize_fraud_tools(),new Promise(function(e,t){this.can_initialize_applepay()?braintree.applePay.create({client:this.clientInstance},function(i,n){if(i)return t(),void this.submit_error(i);this.applePayInstance=n,ApplePaySession.canMakePaymentsWithActiveCard(n.merchantIdentifier).then(function(i){i?e():t()})}.bind(this)):t()}.bind(this))},wc_braintree.ApplePay.prototype.open_wallet=function(){this.applePaySession.begin()},wc_braintree.ApplePay.prototype.init_wallet=function(){var t=this.applePayInstance.createPaymentRequest(this.get_payment_request());try{var i=new ApplePaySession(this.get_applepay_version(),t);this.applePaySession=i,i.onvalidatemerchant=this.onvalidatemerchant.bind(this),this.needs_shipping()||e(document.body).hasClass("woocommerce-change-payment-method")||e(document.body).hasClass("woocommerce-order-pay")||(i.onpaymentmethodselected=this.onpaymentmethodselected.bind(this)),this.needs_shipping()&&(i.onshippingcontactselected=this.onshippingcontactselected.bind(this),i.onshippingmethodselected=this.onshippingmethodselected.bind(this)),i.onpaymentauthorized=this.onpaymentauthorized.bind(this)}catch(e){this.submit_error(e)}},wc_braintree.ApplePay.prototype.get_applepay_version=function(){return ApplePaySession.supportsVersion(4)?4:ApplePaySession.supportsVersion(3)?3:void 0},wc_braintree.ApplePay.prototype.get_payment_request=function(){return{total:{label:this.params.store_name,amount:this.get_total_price(),type:"final"},lineItems:this.get_line_items(),currencyCode:this.get_currency(),requiredBillingContactFields:this.get_billing_fields_array(),requiredShippingContactFields:this.get_shipping_fields_array()}},wc_braintree.ApplePay.prototype.get_line_items=function(){return e("#wc_braintree_applepay_line_items").data("items")},wc_braintree.ApplePay.prototype.set_line_items=function(t){e("#wc_braintree_applepay_line_items").data("items",t)},wc_braintree.ApplePay.prototype.get_address_mappings=function(){return{givenName:{get:function(t){return e(t+"_first_name").val()},set:function(t,i){e(i+"_first_name").val(t)},contactField:"name",isValid:function(e){return void 0!==e&&"string"==typeof e&&""!==e.trim()}},familyName:{get:function(t){return e(t+"_last_name").val()},set:function(t,i){e(i+"_last_name").val(t)},contactField:"name",isValid:function(e){return void 0!==e&&"string"==typeof e&&""!==e.trim()}},addressLines:{get:function(t){var i=[];return""!=e(t+"_address_1").val()&&i.push(e(t+"_address_1").val()),""!=e(t+"_address_2").val()&&i.push(e(t+"_address_2").val()),i},set:function(t,i){e(i+"_address_1").val(t[0]),2==t.length&&e(i+"_address_2").val(t[1])},contactField:"addressLines",isValid:function(e){var t=e[0];return void 0!==t&&("string"!=typeof t||""!==t.trim())}},administrativeArea:{get:function(t){return e(t+"_state").val()},set:function(t,i){2==t.length?e(i+"_state").val(t.toUpperCase()):e(i+"_state option").each(function(){var n=e(this),a=n.text().toLowerCase();t=t.toLowerCase(),a.indexOf(t)>=0&&e(i+"_state").val(n.val())})},contactField:"administrativeArea",isValid:function(t,i){var n=this.params.states[i.countryCode];return!(n&&!e.isEmptyObject(n))||void 0!==t&&"string"==typeof t&&""!==t.trim()&&void 0!==n[t]}},locality:{get:function(t){return e(t+"_city").val()},set:function(t,i){e(i+"_city").val(t)},contactField:"locality",isValid:function(e){return void 0!==e&&"string"==typeof e&&""!==e.trim()}},postalCode:{get:function(t){return e(t+"_postcode").val()},set:function(t,i){e(i+"_postcode").val(t)},contactField:"postalCode",isValid:function(e){return void 0!==e&&"string"==typeof e&&""!==e.trim()}},phoneNumber:{get:function(t){return e("#billing_phone").val()},set:function(t,i){e("#billing_phone").val(t)},contactField:"phoneNumber",isValid:function(e){return void 0!==e&&"string"==typeof e&&""!==e.trim()}},emailAddress:{get:function(t){return e("#billing_email").val()},set:function(t,i){e("#billing_email").val(t)},contactField:"emailAddress",isValid:function(e){return void 0!==e&&"string"==typeof e&&""!==e.trim()}},countryCode:{get:function(t){return e(t+"_country").val()},set:function(t,i){e(i+"_country").val(t.toUpperCase())},contactField:"countryCode",isValid:function(e){return void 0!==e&&"string"==typeof e&&""!==e.trim()}}}},wc_braintree.ApplePay.prototype.populate_address_fields=function(e,t){var i=this.get_address_mappings();for(var n in e)if(i[n]){var a=e[n];i[n].set.call(this,a,t)}},wc_braintree.ApplePay.prototype.get_address_hash=function(t){var i=this.get_address_mappings(),n="";return e.each(["givenName","familyName","addressLines","administrativeArea","locality","postalCode","countryCode"],function(e,a){n+=i[a].get(t)}),n},wc_braintree.ApplePay.prototype.validate_response=function(e){var t=[],i=this.get_address_mappings(),n=this.params.messages.errors;if(e.shippingContact){var a=this.needs_shipping()?i:{emailAddress:i.emailAddress,phoneNumber:i.phoneNumber};for(var r in e.shippingContact)if(a[r]){var o=e.shippingContact[r];a[r].isValid.call(this,o,e.shippingContact)||t.push(new ApplePayError("shippingContactInvalid",a[r].contactField))}}if(e.billingContact)for(var r in e.billingContact)if(i[r]){o=e.billingContact[r];if(!i[r].isValid.call(this,o,e.billingContact)){var s=n["invalid_"+i[r].contactField]?n["invalid_"+i[r].contactField]:"";t.push(new ApplePayError("billingContactInvalid",i[r].contactField,s))}}return t},wc_braintree.ApplePay.prototype.get_billing_fields_array=function(){return["postalAddress"]},wc_braintree.ApplePay.prototype.get_shipping_fields_array=function(){var t=[];return this.needs_shipping()&&t.push("name","postalAddress"),e("#billing_email").length&&t.push("email"),e("#billing_phone").length&&t.push("phone"),t},wc_braintree.ApplePay.prototype.populate_address_data=function(e){return new Promise(function(t,i){e.shippingContact&&this.populate_address_fields(e.shippingContact,"#shipping"),e.billingContact&&this.populate_address_fields(e.billingContact,"#billing"),t(e)}.bind(this))},wc_braintree.ApplePay.prototype.can_initialize_applepay=function(){return window.ApplePaySession&&ApplePaySession.canMakePayments()},wc_braintree.ApplePay.prototype.has_nonce=function(){return e(this.nonce_selector).val().length>0},wc_braintree.ApplePay.prototype.onvalidatemerchant=function(e){this.applePayInstance.performValidation({validationURL:e.validationURL,displayName:this.params.store_name},function(e,t){if(e)return this.submit_error(e),void this.applePaySession.abort();this.applePaySession.completeMerchantValidation(t)}.bind(this))},wc_braintree.ApplePay.prototype.onshippingcontactselected=function(e){this.update_shipping_address({country:e.shippingContact.countryCode,state:e.shippingContact.administrativeArea,postcode:e.shippingContact.postalCode,city:e.shippingContact.locality}).then(function(e){this.can_ship=!0,this.applePaySession.completeShippingContactSelection(e.data.shippingContactUpdate)}.bind(this)).catch(function(e){"addressUnserviceable"===e.code?(this.can_ship=!1,this.applePaySession.completeShippingContactSelection(e.data.shippingContactUpdate)):this.applePaySession.completeShippingContactSelection({errors:[new ApplePayError(e.code,e.data.contactField,e.message)],newTotal:e.data.newTotal,newShippingMethods:e.data.newShippingMethods})}.bind(this))},wc_braintree.ApplePay.prototype.onshippingmethodselected=function(e){var t={},i=e.shippingMethod.identifier.match(/([\w]+)\:(.+)/);t[i[1]]=i[2],this.update_shipping_method(t).then(function(e){e.code?(this.applePaySession.abort(),this.submit_error(e.messages)):this.applePaySession.completeShippingMethodSelection(e.data.shippingMethodUpdate)}.bind(this)).catch(function(){this.applePaySession.abort(),this.submit_error(errorThrown)}.bind(this))},wc_braintree.ApplePay.prototype.onpaymentmethodselected=function(t){e.ajax({url:this.params.routes.applepay_payment_method,method:"POST",dataType:"json",beforeSend:function(e,t){e.setRequestHeader("X-WP-Nonce",this.params._wp_rest_nonce)}.bind(this),success:function(e,t,i){if(!e.success)return this.applePaySession.abort(),void this.submit_error(e.messages);this.applePaySession.completePaymentMethodSelection(e.data)}.bind(this),error:function(e,t,i){this.applePaySession.abort(),this.submit_error(i)}.bind(this)})},wc_braintree.ApplePay.prototype.onpaymentauthorized=function(t){return new Promise(function(i,n){this.applePayInstance.tokenize({token:t.payment.token},function(a,r){if(a)return this.submit_error(a),void this.applePaySession.completePayment(ApplePaySession.STATUS_FAILURE);var o=this.validate_response(t.payment);o.length>0?(this.applePaySession.completePayment({status:ApplePaySession.STATUS_FAILURE,errors:o}),n(r)):this.needs_shipping()&&!this.can_ship?(this.applePaySession.completePayment({status:ApplePaySession.STATUS_FAILURE,errors:[new ApplePayError("addressUnserviceable")]}),n(r)):(this.applePaySession.completePayment(ApplePaySession.STATUS_SUCCESS),this.set_nonce(r.nonce),this.set_device_data(),this.populate_address_data(t.payment),e('[name="payment_method"]').val(this.gateway_id),this.on_payment_method_received(r),i(r))}.bind(this))}.bind(this))}}(jQuery);