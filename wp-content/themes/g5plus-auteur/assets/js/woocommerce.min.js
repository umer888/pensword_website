var G5_Woocommerce=window.G5_Woocommerce||{};(function(a){'use strict';window.G5_Woocommerce=G5_Woocommerce;var b=a('body'),c=b.hasClass('gf-lazy-load'),d=b.hasClass('rtl');G5_Woocommerce={init:function(){this.processTabs(),this.productCatalogFilter(),this.initFilterAjax(),this.updateAjaxSuccess(),this.initFilterBellow(),this.initPerfectSroll(),this.initSwitchLayout(),this.addToWishlist(),this.addToCart(),this.quickView();var g=a('.woocommerce-product-gallery');0<g.length&&this.singleProductImage(g),this.addCartQuantity(),this.initSingleVideo(),setTimeout(function(){G5_Woocommerce.setCartScrollBar()},500),this.saleCountdown(),this.events(),this.customProductNavPosition(),a('select.country_to_state, input.country_to_state').trigger('change'),this.productSize(),this.authorFilter()},authorFilter:function(){var g=a('.widget-author-alphabet .gf-author-alphabet'),h=a('.gsf-product-authors-inner:not(.owl-carousel)');g.length&&h.length?(h.each(function(){var j=a(this);j.imagesLoaded(function(){j.isotope({itemSelector:'.gsf-product-author-item',layoutMode:'fitRows',isOriginLeft:!d,transitionDuration:'0.8s'})})}),g.each(function(){a(this).on('click','a',function(j){j.preventDefault();var k=!0;if(a(this).closest('.character-item').hasClass('active')&&(k=!1),k){var l=a(this).attr('href');h.isotope({filter:l}),g.find('.character-item').removeClass('active'),a('a[href="'+l+'"]').closest('.character-item').addClass('active')}})})):g.length&&a('.widget-author-alphabet').remove()},customProductNavPosition:function(){a('.custom-product-nav-position').each(function(){var g=a(this).find('ul.nav-tabs.gf-cate-filter'),h=a(this).find('.vc_column_container:first-child > .vc_column-inner > .wpb_wrapper');g.length&&h.append(g.detach())})},updateAjaxSuccess:function(){var g=this;b.on('gf_pagination_ajax_success',function(h,j,k,l){'product'===j.settings.post_type&&(G5_Core.pagination_ajax.updatePageTitle(j,k,l),G5_Core.pagination_ajax.updateSideBar(j,k,l),g.updateAboveCustomize(j,k,l),G5_Core.util.tooltip(),G5_Woocommerce.saleCountdown(),b.trigger('gf_woocommerce_ajax_success',[j,k,l]))}),b.on('gf_pagination_ajax_before_update_sidebar',function(h,j){'product'===j.settings.post_type&&g.initWidgetAjaxSuccess()})},initFilterAjax:function(){a(document).on('click','.clear-filter-wrap a, .gf-price-filter a, .gf-product-sorting a, .gf-attr-filter-content a, .gf-product-category-filter a, .product-categories a,.woocommerce-widget-layered-nav a',function(g){var h=a('[data-archive-wrapper]');if(0<h.length){g.preventDefault();var j=h.data('items-wrapper');G5_Core.pagination_ajax.loadPosts(j,this)}})},initFilterBellow:function(){var g=a('#primary-content'),h=a('.gsf-catalog-filter');h.length&&(h.detach().insertBefore(g),h.removeAttr('hidden')),a(document).off('click','.gf-filter-bellow').on('click','.gf-filter-bellow',function(){a(this).toggleClass('active'),a('#gf-filter-content').slideToggle('500'),G5_Woocommerce.initPerfectSroll()}),a('.gf-filter-type-select').length&&a('.gf-filter-type-select .gf-attr-filter-content').slideUp('100'),a('.gf-product-category-filter-select').length&&a('.gf-product-category-filter-select .gf-product-category-filter').slideUp('100'),a(document).off('click','.gf-filter-type-select .filter-select-open').on('click','.gf-filter-type-select .filter-select-open',function(j){var k=a(j.target).closest('.gf-filter-type-select').toggleClass('opened');k.hasClass('opened')?a('.gf-attr-filter-content',k).slideDown('500'):a('.gf-attr-filter-content',k).slideUp('fast')}),a(document).off('click','.gf-product-category-filter-select .gf-filter-open').on('click','.gf-product-category-filter-select .gf-filter-open',function(j){var k=a(j.target).closest('.gf-product-category-filter-select').toggleClass('opened');k.hasClass('opened')?a('.gf-product-category-filter',k).slideDown('500'):a('.gf-product-category-filter',k).slideUp('fast')}),a(document).on('click',function(j){a(j.target).closest('.gf-filter-type-select').length||a('.gf-filter-type-select').removeClass('opened').find('.gf-attr-filter-content').slideUp('fast'),a(j.target).closest('.gf-product-category-filter-select').length||a('.gf-product-category-filter-select').removeClass('opened').find('.gf-product-category-filter').slideUp('fast')})},updateAboveCustomize:function(g,h,j){var k=0<a(j).closest('[data-items-paging]').length&&(g.settings.post_paging===G5_Core.pagination_ajax.paging.loadMore||g.settings.post_paging===G5_Core.pagination_ajax.paging.infiniteScroll),l=a('.gsf-catalog-filter');if(0<l.length&&!k&&'undefined'!=typeof g.settings.isMainQuery&&!0===g.settings.isMainQuery){var m=h.find('.gsf-catalog-filter');0<m.length&&(l.replaceWith(m.removeAttr('hidden').prop('outerHTML')),a('.woocommerce-ordering').off('change').on('change','select.orderby',function(){a(this).closest('form').submit()}),a('.gsf-pretty-tabs').each(function(){a(this).gsfPrettyTabs()}),G5_Woocommerce.initPerfectSroll())}},initWidgetAjaxSuccess:function(){this.initPriceFilter()},initPriceFilter:function(){if('undefined'!=typeof a().slider){a('input#min_price, input#max_price').hide(),a('.price_slider, .price_label').show();var g=a('.price_slider_amount #min_price').data('min'),h=a('.price_slider_amount #max_price').data('max'),j=a('.price_slider_amount #min_price').val(),k=a('.price_slider_amount #max_price').val();a('.price_slider:not(.ui-slider)').slider({range:!0,animate:!0,min:g,max:h,values:[j,k],create:function(){a('.price_slider_amount #min_price').val(j),a('.price_slider_amount #max_price').val(k),a(document.body).trigger('price_slider_create',[j,k])},slide:function(l,m){a('input#min_price').val(m.values[0]),a('input#max_price').val(m.values[1]),a(document.body).trigger('price_slider_slide',[m.values[0],m.values[1]])},change:function(l,m){a(document.body).trigger('price_slider_change',[m.values[0],m.values[1]])}})}},initPerfectSroll:function(){a('.gf-product-category-filter-wrap .gf-product-category-filter','#gf-filter-content').perfectScrollbar({wheelSpeed:0.5,suppressScrollX:!0})},initSwitchLayout:function(){var g=!1;a(document).on('click','.gf-shop-switch-layout li a',function(h){h.preventDefault();var j=a(this),k=j.data('layout'),l=b.find('[data-archive-wrapper]').find('[data-items-container="true"]'),m=l.find('.gf-paging');j.closest('li').hasClass('active')||g||(g=!0,j.closest('.gf-shop-switch-layout').children('li').removeClass('active'),j.closest('li').addClass('active'),m.fadeOut(),j.waypoint(function(){a(this.element).addClass('wpb_start_animation animated'),this.destroy()}),l.fadeOut(function(){'list'===k?l.removeClass('layout-grid').addClass('layout-list'):l.removeClass('layout-list').addClass('layout-grid'),G5_Core.util.tooltip(),l.fadeIn('slow'),m.fadeIn('slow')}),a.cookie('product_layout',k,{expires:15}),g=!1)})},addToWishlist:function(){a(document).on('click','.add_to_wishlist',function(){var g=a(this),h=g.parent().parent();if(!h.parent().hasClass('single-product-function')){g.addClass('added-spinner');var j=h.parent().parent().parent().parent();if('undefined'==typeof j)return;j.addClass('active')}}),b.on('added_to_wishlist',function(){var l=a('.added-spinner.add_to_wishlist'),m=l.parent().parent();if(!m.parent().hasClass('single-product-function')){var n=m.parent().parent().parent().parent();if('undefined'==typeof n)return;setTimeout(function(){n.removeClass('active'),l.removeClass('added-spinner')},700)}})},addToCart:function(){a(document).on('click','.add_to_cart_button',function(){var g=a(this);if(g.hasClass('ajax_add_to_cart')){var h=g.closest('.product-item-wrap');if('undefined'==typeof h)return;h.addClass('active')}}),b.on('wc_cart_button_updated',function(g,h){var j=a('.header-sticky-wrapper .header-sticky'),k=a('.item-shopping-cart',j),l=h.hasClass('single_add_to_cart_button');if(!l){var m=h.parent(),n=m.find('.added_to_cart'),o=n.text(),p=m.closest('.product-item-inner');h.closest('.gf-product-swatched').length||h.remove(),m.data('toggle')&&(n.html('<i class="fa fa-check"></i> '+o),setTimeout(function(){m.tooltip('hide').attr('title',o).tooltip('_fixTitle')},500)),setTimeout(function(){G5_Woocommerce.setCartScrollBar(function(){if(0<k.length){var q=0;j.hasClass('header-hidden')&&(j.removeClass('header-hidden'),q=500),setTimeout(function(){k.addClass('show-cart'),setTimeout(function(){k.removeClass('show-cart')},2e3)},q)}})},10),setTimeout(function(){p.removeClass('active')},700)}}),b.on('removed_from_cart',function(){setTimeout(function(){G5_Woocommerce.setCartScrollBar(),a(document.body).trigger('update_checkout');var g=a('[name="update_cart"]');g.length&&g.removeAttr('disabled').trigger('click')},10)})},setCartScrollBar:function(g){a('.cart_list.product_list_widget').perfectScrollbar({wheelSpeed:0.5,suppressScrollX:!0}),g&&g()},quickView:function(){var g=!1;a(document).on('click','.product-quick-view',function(h){if(h.preventDefault(),!g){g=!0;var j=a(this),k=j.data('product_id'),l='#popup-product-quick-view-wrapper',m=j.find('i'),n=m.attr('class'),o=j.parent().parent().parent().parent(),p=j,q=j.hasClass('prev-product')||j.hasClass('next-product');o.addClass('active'),p.addClass('active'),m.attr('class','fal fa-spinner fa-spin'),a.ajax({url:g5plus_variable.ajax_url,data:{action:'product_quick_view',id:k},success:function(r){o.removeClass('active'),p.removeClass('active'),m.attr('class',n);var s=a('.modal-body',l);if(!q){a(l).length&&a(l).remove(),b.append(r);var t=a('.quick-view-product-image',l);if('undefined'!=typeof a.fn.wc_variation_form){var u=a(l).find('.variations_form'),v=a(l).find('.variations_form .variations select');u.wc_variation_form(),u.trigger('check_variations'),v.change()}a(l).modal(),'undefined'!=typeof a.fn.wc_product_gallery&&setTimeout(function(){a('.woocommerce-product-gallery',t).wc_product_gallery(),G5_Woocommerce.singleProductImage(t),G5_Woocommerce.initSingleVideo()},200),G5_Core.util.tooltip(),G5_Woocommerce.saleCountdown()}else{var w=a('.modal-content',l),x=a('.product-quickview-navigation',l);w.css({width:w.width(),height:w.height()}),s.fadeOut(function(){s.html(a('.modal-body',r).html()).fadeIn(),x.html(a('.product-quickview-navigation',r).html());var y=a('.quick-view-product-image',s);if('undefined'!=typeof a.fn.wc_variation_form){var z=a(l).find('.variations_form'),A=a(l).find('.variations_form .variations select');z.wc_variation_form(),z.trigger('check_variations'),A.change()}a(l).addClass('in'),'undefined'!=typeof a.fn.wc_product_gallery&&a('.woocommerce-product-gallery',y).wc_product_gallery(),G5_Woocommerce.singleProductImage(y),G5_Woocommerce.initSingleVideo(),a(l).fadeIn(),setTimeout(function(){w.css({width:'',height:''})},1e3),G5_Core.util.tooltip(),G5_Woocommerce.saleCountdown()})}b.trigger('gf_quick_view_success'),G5_Woocommerce.addCartQuantity(),g=!1},error:function(){g=!1}})}})},saleCountdown:function(){function g(h,j){var k=parseInt(h.offset.seconds),l=parseInt(h.offset.minutes),m=parseInt(h.offset.hours),n=parseInt(h.offset.totalDays);10>n&&(n='0'+n),10>m&&(m='0'+m),10>l&&(l='0'+l),10>k&&(k='0'+k),a('.countdown-day',j).text(n),a('.countdown-hours',j).text(m),a('.countdown-minutes',j).text(l),a('.countdown-seconds',j).text(k)}a('.product-deal-countdown').each(function(){var h=a(this).data('date-end'),j=a(this);j.countdown(h,function(k){g(k,j)}).on('update.countdown',function(k){g(k,j)})}),G5_Woocommerce.saleCountdownWidth()},saleCountdownWidth:function(){a('.product-deal-countdown').each(function(){if(!a(this).parents().hasClass('gsf-product-deal')){var g=0;a(this).removeClass('small'),a('.countdown-section',a(this)).each(function(){g+=a(this).outerWidth()+parseInt(a(this).css('margin-right').replace('px',''),10)}),g>a(this).outerWidth()&&a(this).addClass('small')}else{var h=0;a(this).removeClass('small'),a('.countdown-section',a(this)).each(function(){h+=a(this).innerHeight()+parseInt(a(this).css('margin-top').replace('px',''),10)}),h>a(this).outerHeight()&&a(this).addClass('small')}})},singleProductImage:function(g){var h=g.find('.flex-control-thumbs'),j=4,k=30;if(!h.length)g.closest('.product-single-layout-02').length&&g.addClass('gallery-not-thumbs');else if(h.attr('hidden','hidden'),0!==h.closest('.quick-view-product-image').length&&(j=3,k=10),h.closest('.product-single-layout-01').length)h.on('initialized.owl.carousel',function(){setTimeout(function(){h.removeAttr('hidden')},500)}).addClass('owl-carousel owl-theme').owlCarousel({nav:!1,dots:!1,rtl:d,lazyLoad:c,responsive:{992:{items:j,margin:k},768:{margin:30},0:{items:3,margin:10}}});else{var l=!0,m=[],n=4;h.removeAttr('hidden'),h.on('init',function(){var q=window.innerWidth;1020<=q&&(n=4),1020>q&&(n=4);for(var r=0;r<n;r++)m.push(r)}),a(window).on('resize load',function(){var p=window.innerWidth;return 1020<=p&&(n=4),1020>p&&(n=4),n}),h.on('afterChange',function(o,p,q){m.length=0;for(var r=q;r<q+n;r++)m.push(r)}),h.slick({swipeToSlide:!0,infinite:!1,slidesToShow:j,slidesToScroll:2,speed:400,arrows:!1,vertical:l,verticalSwiping:l,rtl:d,responsive:[{breakpoint:1200,settings:{slidesToShow:j,vertical:!1,verticalSwiping:!1}},{breakpoint:992,settings:{slidesToShow:3,vertical:!1,verticalSwiping:!1}},{breakpoint:768,settings:{slidesToShow:4}},{breakpoint:576,settings:{slidesToShow:4,vertical:!1,verticalSwiping:!1}},{breakpoint:320,settings:{slidesToShow:3,vertical:!1,verticalSwiping:!1}}]})}},addCartQuantity:function(){a(document).off('click','.quantity .btn-number').on('click','.quantity .btn-number',function(g){g.preventDefault();var h=a(this).data('type'),j=a('input',a(this).parent()),k=parseFloat(j.val()),l=parseFloat(j.attr('max')),m=parseFloat(j.attr('min')),n=parseFloat(j.attr('step')),o=0;0<j.attr('step').indexOf('.')&&(o=j.attr('step').split('.')[1].length),isNaN(l)&&(l=100),isNaN(m)&&(m=0),isNaN(n)&&(n=1,o=0),isNaN(k)?j.val(m):('minus'==h&&(k>m&&(k=(k-n).toFixed(o),j.val(k).change()),parseFloat(j.val())<=m&&(j.val(m).change(),a(this).attr('disabled',!0))),'plus'==h&&(k<l&&(k=(k+n).toFixed(o),j.val(k).change()),parseFloat(j.val())>=l&&(j.val(l).change(),a(this).attr('disabled',!0))))}),a('input','.quantity').on('focusin',function(){a(this).data('oldValue',a(this).val())}),a('input','.quantity').on('change',function(){var g=a(this),h=parseFloat(g.attr('max')),j=parseFloat(g.attr('min')),k=parseFloat(g.val()),l=parseFloat(g.attr('step'));isNaN(h)&&(h=100),isNaN(j)&&(j=0),isNaN(l)&&(l=1);var m=a('.add_to_cart_button',a(this).parent().parent().parent());k>=j?(a('.btn-number[data-type=\'minus\']',a(this).parent()).removeAttr('disabled'),'undefined'!=typeof m&&m.attr('data-quantity',k)):(alert('Sorry, the minimum value was reached'),a(this).val(a(this).data('oldValue')),'undefined'!=typeof m&&m.attr('data-quantity',a(this).data('oldValue'))),k<=h?(a('.btn-number[data-type=\'plus\']',a(this).parent()).removeAttr('disabled'),'undefined'!=typeof m&&m.attr('data-quantity',k)):(alert('Sorry, the maximum value was reached'),a(this).val(a(this).data('oldValue')),'undefined'!=typeof m&&m.attr('data-quantity',a(this).data('oldValue')))})},initSingleVideo:function(){var g=b.find('[class*="product-single-layout-"]');if(g.length){var h=g.find('.flex-control-thumbs'),j=g.find('.woocommerce-product-gallery'),k=g.find('.single-product-video'),l=g.find('.flex-viewport');if(k.length){var m=k.find('iframe'),n=m.attr('src');a('li',h).on('click',function(){if(a(this).closest('.owl-item').length&&a(this).closest('.owl-item').is(':last-child')||a(this).is('.slick-slide')&&a(this).is(':last-child')){m.attr('src',n),j.addClass('product-gallery-video');var o=l.height();k.find('.embed-responsive').css('height',o+'px')}else j.removeClass('product-gallery-video'),m.attr('src','')})}}},processTabs:function(){a('.gsf-pretty-tabs').each(function(){var g=a(this);if(0<g.closest('.custom-product-row').length){var h=g.closest('.custom-product-row').find('.gf-heading');if(!G5_Core.util.isDesktop())g.css({'margin-left':0,'margin-right':0});else if(0<h.length){var j=h.find('.heading-title').outerWidth();d?g.css('margin-right',j+30):g.css('margin-left',j+30),g.gsfPrettyTabs()}}})},productCatalogFilter:function(){a('.gsf-catalog-filter').each(function(){var g=a(this).find('.gsf-catalog-filter-cat-filter');0!==g.length&&(g.closest('.gsf-catalog-filter-item').css('flex','1 0 0%').siblings().css('flex',''),setTimeout(function(){b.find('.gsf-pretty-tabs').gsfPrettyTabs()},10))})},events:function(){var g=null;a(window).on('resize',function(){G5_Woocommerce.saleCountdown(),null!=g&&clearTimeout(g),g=setTimeout(function(){G5_Woocommerce.processTabs(),G5_Woocommerce.productSize()},200)}),a('[data-items-wrapper].products').on('gf_pagination_ajax_success',function(){G5_Woocommerce.productSize()})},productSize:function(){a('.product-item-wrap').each(function(){a(this).removeClass('product-small'),!a(this).closest('.layout-list').length&&250>a(this).width()&&a(this).addClass('product-small')})}},a(document).ready(function(){G5_Woocommerce.init()})})(jQuery);