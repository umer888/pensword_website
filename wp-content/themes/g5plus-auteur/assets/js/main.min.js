(function(a){'use strict';var b=window.G5_Main||{};window.G5_Main=b;var c=a(window),d=a('body'),e=d.hasClass('rtl'),f=navigator.userAgent.toLowerCase(),g=f.match(/(iphone|ipod|android|iemobile)/),h=f.match(/(iphone|ipod|ipad|android|iemobile)/),i=f.match(/(iphone|ipod|ipad)/),j=f.match(/(iemobile)/);b.blog={init:function(){this.events(),this.readingProcess()},readingProcess:function(){var l=a('#gsf-reading-process'),m=a('.single-post .gf-single-wrap .post-single');0<l.length&&0<m.length&&m.imagesLoaded(function(){var n=m.height(),o=c.height(),p=0,q=m.offset().top,r=c.scrollTop();r>q&&(p=100*(r-q)/(n-o)),100<p&&(p=100),l.css('width',p+'%'),c.scroll(function(){var s=0,t=m.offset().top,u=c.scrollTop();u>t&&(s=100*(u-t)/(n-o)),100<s&&(s=100),l.css('width',s+'%')})})},events:function(){this}},b.page={init:function(){this.rowEqualHeight(),this.events()},rowEqualHeight:function(){a('.row-equal-height').each(function(){var l=a('.gsf-product-singular',a(this)),m=a('.product-info',l).outerHeight(),n=a('.gf-banner',a(this)),o=a('.gf-banner-bg',n);if(G5_Core.util.isDesktop()){var p=a('.image-item',a('.product-singular-images',l)),q=p.outerHeight(),r=m+q;o.css('padding-bottom',r+'px'),a('.product-singular-images',l).on('owlInitialized',function(){p=a('.image-item',a(this)),q=p.outerHeight(),r=m+q,o.css('padding-bottom',r+'px')})}else o.css('padding-bottom','')})},events:function(){a(window).on('resize',function(){setTimeout(function(){b.page.rowEqualHeight()},500)})}},b.popup={init:function(){var l=a('.gsf-login-link-sign-in'),m=a('#gsf-popup-login-wrapper'),n=a('.gsf-login-link-sign-up'),o=a('#gsf-popup-register-wrapper');l.on('click',function(){m.length&&m.modal()}),n.on('click',function(){o.length&&o.modal()}),this.login_link_event()},login_link_event:function(){var l=null;a('#gsf-popup-login-form, #gsf-popup-register-form').submit(function(m){l=null;var n=a(m.target).find('[type="submit"]'),o='#'+a(this).attr('id');n.hasClass('ladda-button')&&0<n.length&&(l=Ladda.create(n[0]),l.start());var p=a(o).serialize();return d.addClass('overflow-hidden'),d.append('<div class="processing-title"><i class="fa fa-spinner fa-spin fa-fw"></i></div>'),a.ajax({type:'POST',data:p,url:g5plus_variable.ajax_url,success:function(q){a('.processing-title').fadeOut(function(){a('.processing-title').remove(),d.removeClass('overflow-hidden')});var r=a.parseJSON(q);0>r.code?a('.login-message',o).html(r.message):window.location.reload(),null!=l&&(l.stop(),l.remove())},error:function(){a('.processing-title').fadeOut(function(){a('.processing-title').remove(),d.removeClass('overflow-hidden')}),null!=l&&(l.stop(),l.remove())}}),m.preventDefault(),!1})}},b.event={init:function(){this.registerAnimation()},registerAnimation:function(){'undefined'!=typeof tribe_ev&&a(tribe_ev.events).on('tribe_ev_ajaxSuccess',function(){G5_Core_Animation.prototype.registerAnimation()})}},a(document).ready(function(){b.blog.init(),b.page.init(),b.popup.init(),b.event.init()})})(jQuery);